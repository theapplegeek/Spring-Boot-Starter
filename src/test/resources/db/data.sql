CREATE TABLE public.ROLE
(
    ID   BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR(255) NOT NULL
        CONSTRAINT UK8SEWWNPAMNGI6B1DWAA88ASKK UNIQUE
);

CREATE TABLE public.USER_PROFILE
(
    ID       BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMAIL    VARCHAR(255) NOT NULL
        CONSTRAINT UKTCKS72P02H4DP13CBHXNE17AD UNIQUE,
    ENABLED  BOOLEAN      NOT NULL,
    NAME     VARCHAR(255) NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL,
    ROLE_ID  BIGINT       NOT NULL
        CONSTRAINT FK93VVTKNBPDUXLEI8XO33HWP02 REFERENCES public.ROLE,
    SURNAME  VARCHAR(255) NOT NULL,
    USERNAME VARCHAR(255) NOT NULL
        CONSTRAINT UK9551PIQ2WP9KH4KKET0WR65VT UNIQUE
);

CREATE TABLE public.TOKEN
(
    ID         BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EXPIRATION TIMESTAMP(6)   NOT NULL,
    REVOKED    BOOLEAN        NOT NULL,
    TOKEN      VARCHAR(10240) NOT NULL
        CONSTRAINT UKPDDRHGWXNMS2ACEEKU9S2EWY5 UNIQUE,
    TOKEN_TYPE VARCHAR(255)   NOT NULL
        CONSTRAINT TOKEN_TOKEN_TYPE_CHECK CHECK ((TOKEN_TYPE)::TEXT = ANY
                                                 ((ARRAY ['BEARER'::CHARACTER VARYING, 'RESET_PASSWORD'::CHARACTER VARYING])::TEXT[])),
    USER_ID    BIGINT         NOT NULL
        CONSTRAINT FKTG9KBRYCJWQL3X5FUOCF1HW7C REFERENCES public.USER_PROFILE
);

INSERT INTO role (name)
VALUES ('user'),
       ('admin');

INSERT INTO user_profile (email, enabled, password, role_id, username, name, surname)
VALUES ('admin@mail.com', true, '$2a$10$KWYO4oLjsHyydrEcXL.CseiYe144WLp5C6rczHwDjDU2eNWlaoU7S', 2,
        'admin', 'Admin', 'Admin');
INSERT INTO user_profile (email, enabled, password, role_id, username, name, surname)
VALUES ('user@mail.com', true, '$2a$10$KWYO4oLjsHyydrEcXL.CseiYe144WLp5C6rczHwDjDU2eNWlaoU7S', 1, 'user',
        'User', 'User');
